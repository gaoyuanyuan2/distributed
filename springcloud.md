## SpringCloud
### 1、概述
<br>1. 定义
<br>就目前而言，对于微服务业界并没有一个统一的标准的定义(While there is no precise definition of this architectural style)
<br><br>但通常而言，微服务架构是一 种架构模式或者说是一种架构风格，它提倡将单-应用程序划分成一组小的服务， 每个服务运行在其独立的自己的进程中，服务之间互相协调、
互相配合,为用户提供最终价值。服务之间采用轻量级的通信机制互相沟通
(通常是基于HTTP的RESTful API)。每个服务都围绕着具体业务进行构建，
并且能够被独立地部署到生产环境、类生产环境等。另外，应尽量避免统一的、 集中式的服务管理机制，对具体的一个服务而言，应根据业务上下文，选择合适的语言、工具对其进行构建，
可以有一个非常轻量级的集中式管理来协调这些服务， 可以使用不同的语言来编写服务，也可以使用不同的数据存储。
微服务化的核心就是将传统的一站式应用，根据业务拆分成一个一个的服务，彻底地去耦合每一个微服务提供单个业务功能的服务，一个服务做一件事,
从技术角度看就是一种小而独立的处理过程，类似进程概念，能够自行单独启动或销毁,  拥有自己独立的数据库。
<br><br>简而言之，微服务架构风格是一种将单个应用程序作为一套`小型服务`开发的方法，每种应用程序都运行在自己的`进程`中，并与`轻量级`机制(通常是`HTTP资源API`)
进行通信。这些服务是围绕业务功能构建的，可以通过全自动部署机制`独立部署`，这些服务的集中管理最少，可以用不同的编程语言编写如并使用不同的数据存储技术。
<br><br>2. 优点
<br>每个服务足够内聚，足够小，代码容易理解这样能聚焦一个指定的业务功能或业务需求开发简单、开发效率提高，一个服务可能就是专一的只干一件事。
<br>微服务能够被小团队单独开发，这个小团队是2到5人的开发人员组成。
<br>微服务是松耦合的，是有功能意义的服务，无论是在开发阶段或部署阶段都是独立的。微服务能使用不同的语言开发。
<br>易于和第三方集成，微服务允许容易且灵活的方式集成自动部署，通过持续集成工具，如Jenkins, Hudson, bamboo微服务易于被一个开发人员理解， 修改和维护,这样小团队能够更关注自己的工作成果。无需通过合作才能体现价值。微服务允许你利用融合最新技术。
<br>微服务只是业务逻辑的代码，不会和HTML,CSS或其他界面组件混合。
<br>每个微服务都有自己的存储能力，可以有自己的数据库。也可以有统一数据库。
<br><br>3. 缺点
<br> 开发人员要处理分布式系统的复杂性
<br> 多服务运维难度，随着服务的增加，运维的压力也在增大系统部署依赖服务间通信成本数据一致性系统集成测试性能监控.....
<br><br>
![对比](https://github.com/gaoyuanyuan2/notes/blob/master/img/16.png) 
<br><br>
![对比](https://github.com/gaoyuanyuan2/notes/blob/master/img/17.png) 
<br><br>
<br>4. SpringCloud和SpringBoot是什么关系
<br>SpringCloud,基于SpringBoot提供了一套微服务解决方案，包括服务注册与发现，配置中心，全链路监控，服务网关，负载均衡，熔断器等组件，除了基于NetFlix的开源组件做高度抽象封装之外，还有一些选型中立的开源组件。
<br>SpringCloud利用SpringBoot的开发便利性巧妙地简化了分布式系统基础设施的开发，SpringCloud为开发人员提供 了快速构建分布式系统的一些工具，包括配置管理、服务发现、断路器、路由、微代理、事件总线、全局锁、决策竞选、分布式会话等等,它们都可以用SpringBoot的开发风格做到-键启动和部署。
<br><br>SpringBoot并没有重复制造轮子，它只是将目前各家公司开发的比较成熟、经得起实际考验的服务框架组合起来，通过
<br>SpringBoot风格进行再封装屏蔽掉了复杂的配置和实现原理，最终给开发者留出了一套简单易懂、易部署和易维护的分布式系统开发工具包
<br><br>SpringBoot专注于快速方便的开发单个个体微服务。
SpringCloud是关注全局的微服务协调整理治理框架，它将SpringBoot开发的一 个个单体微服务整合并管理起来,
为各个微服务之间提供，配置管理、服务发现、断路器、  路由、微代理、事件总线、全局锁、决策竞选、分布式会话等等集成服务
<br><br>SpringBoot可以离开SpringCloud独立使用开发项目，但是SpringCloud离不开SpringBoot, 属于依赖的关系
<br>SpringBoot专注于快速、方便的开发单个微服务个体，SpringCloud关注全局的服务治理框架。
<br><br>5.最大区别: SpringCloud抛弃 了Dubbo的RPC通信，采用的是基于HTTP的REST方式。
<br><br> 严格来说，这两种方式各有优劣。虽然从一定程度上来说，后者牺牲了服务调用的性能，但也避免了上面提到的原生RPC带来的问题。而且REST相比RPC更为灵活，服务提供方和调用方的依赖只依靠一纸契约, 
不存在代码级别的强依赖，这在强调快速演化的微服务环境下，显得更加合适。
<br><br>品牌机与组装机的区别
<br><br>社区支持与更新力度
<br><br>最为重要的是，DUBBO停止了5年左右的更新，虽然2017.7重启了。对于技术发展的新需求,需要由开发者自行拓展升级(比如当当网弄出了DubboX)，这对于很多想要采用微服务架构的中小软件组织，显然是不太合适的，中小公司没有这么强大的技术能力去修改Dubbo源码+周边的一整套解决方案,并不是每一个公司都有阿里的大牛 +真实的线上生产环境测试过。
<br><br> Dubbo的定位始终是一款RPC框架，而Spring Cloud的目标是微服务架构下的一站式解决方案。
<br><br>在面临微服务基础框架选型时Dubbo与Spring Cloud是只能二选一
### 2、配置管理
#### 配置管理工具包，让你可以把配置放到远程服务器，集中化管理集群配置
<br> 1.将值存放在缓存中，数据库中备份。
<br><br> 2.后台搭建一套可视化管理配置文件项目。
<br><br> 3.读取流程先从缓存中读取，緩存没有在读取数据库。4.缓存与数据库值不同步怎么解决，清理缓存。
<br><br> 4.将配置文件信息，存放在版本控制(git、svn)
### 3、分布式事务
### 4、接口网关
### Zuul 是在云平台上提供动态路由,监控,弹性,安全等边缘服务的框架。
可以解决跨域问题
### 5、注册中心
### 6、Eureka 服务发现、服务注册
#### 云端服务发现，一个基于 REST 的服务，用于定位服务，以实现云端中间层服务发现和故障转移。
HTTP的restful
### 7、分布式会话
### 8、断路器
#### Hystrix 熔断器，容错管理工具，旨在通过熔断机制控制服务和第三方库的节点,从而对延迟和故障提供更强大的容错能力。
<br>雪崩效应，所有请求在处理一个服务，不能访问其他服务接口。
<br>1.使用超时机制、服务降级
<br>服务降级服务调用接口，如果发生错误或者超时，不让调用接口，调用本地fallback
<br>服务雪崩产生服务堆积，导致其他服务接口无法。
<br><br>2.如何解决服务雪崩效应
<br><br>1) 超时机制--服务降级处理
<br><br>2) 服务降级服务接口发生错误，不去调用接口，调用本地方法fallback
<br><br>3) 熔断机制类似保险丝 熔断机制就是为解决服务高并发，一旦达到规定请求，熔断，报错。----服务降级
<br><br>4) 隔离机制---每个服务接口隔离开;
<br><br>5） 限流机制nginx使用网关
<br><br>3. SpringCloud hystrix断路器pc远程调用，解决服务雪崩效
<br>服务与服务之间报错信息。
 <br> hystrix断路器服务降级、熔断机制、隔离资源。
### 9、负载均街
#### Ribbon 提供云端负载均衡，有多种负载均衡策略可供选择，可配合服务发现和断路器使用。
#### Feign 是一种声明式、模板化的HTTP客户端。
### 10、全局锁
